<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>äº”åéŸ³ã‚«ãƒ¼ãƒ‰ã‚¬ãƒãƒ£</title>

<style>
body {
  margin: 0;
  background: #00FF00; /* ã‚¯ãƒ­ãƒã‚­ãƒ¼ç”¨ã‚°ãƒªãƒ¼ãƒ³ */
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: sans-serif;
  overflow: hidden;
}

.container {
  text-align: center;
}

.card {
  width: 200px;
  height: 260px;
  background: white;
  border-radius: 20px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 100px;
  margin: 20px auto;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  transition: transform 0.6s;
}

.flip {
  transform: rotateY(360deg);
}

button {
  padding: 12px 30px;
  font-size: 18px;
  border-radius: 30px;
  border: none;
  cursor: pointer;
  background: #ff6b6b;
  color: white;
}

/* ğŸ”¥ çµ¶å¯¾ã«ä¸Š */
.countdown-wrapper {
  position: fixed;
  top: 80px;
  left: 50%;
  transform: translateX(-50%);
  width: 180px;
  height: 180px;
  z-index: 9999;
  display: none;
  position: fixed;
}

/* ğŸ”¥ ã“ã‚Œè¿½åŠ  */
.countdown-wrapper {
  position: fixed;
}

/* ğŸ”¥ SVGã‚’çµ¶å¯¾é…ç½® */
.countdown-wrapper svg {
  position: absolute;
  top: 0;
  left: 0;
}

/* ğŸ”¥ æ•°å­—ã‚‚çµ¶å¯¾é…ç½®ï¼†ä¸­å¤®å›ºå®š */
.count-number {
  position: absolute;
  top: 0;
  left: 0;
  width: 180px;
  height: 180px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 80px;
  font-weight: bold;
  color: white;
  text-shadow: 0 0 20px black;
  z-index: 10;
}

svg {
  transform: rotate(-90deg);
}

circle {
  fill: none;
  stroke-width: 10;
}

.bg-ring {
  stroke: rgba(255,255,255,0.2);
}

.progress-ring {
  stroke: #00ffea;
  stroke-linecap: round;
}
</style>
</head>
<body>

<div class="container">
  <div class="card" id="card">
    <div id="result">ï¼Ÿ</div>
  </div>
  <button id="drawBtn">ã‚ãã‚‹ï¼</button>
</div>

<div class="countdown-wrapper" id="countdownWrapper">
  <svg width="180" height="180">
    <circle class="bg-ring" cx="90" cy="90" r="80"></circle>
    <circle class="progress-ring" id="progressRing" cx="90" cy="90" r="80"></circle>
  </svg>
  <div class="count-number" id="countNumber"></div>
</div>

<audio id="shuffleSound" src="shuffle.mp3"></audio>
<audio id="resultSound" src="result.mp3"></audio>

<script>
const gojyuon = [
  "ã‚","ã„","ã†","ãˆ","ãŠ",
  "ã‹","ã","ã","ã‘","ã“",
  "ã•","ã—","ã™","ã›","ã",
  "ãŸ","ã¡","ã¤","ã¦","ã¨",
  "ãª","ã«","ã¬","ã­","ã®",
  "ã¯","ã²","ãµ","ã¸","ã»",
  "ã¾","ã¿","ã‚€","ã‚","ã‚‚",
  "ã‚„","ã‚†","ã‚ˆ",
  "ã‚‰","ã‚Š","ã‚‹","ã‚Œ","ã‚",
  "ã‚","ã‚’","ã‚“",
  "ãŒ","ã","ã","ã’","ã”",
  "ã–","ã˜","ãš","ãœ","ã",
  "ã ","ã¢","ã¥","ã§","ã©",
  "ã°","ã³","ã¶","ã¹","ã¼",
  "ã±","ã´","ã·","ãº","ã½"
];

const result = document.getElementById("result");
const btn = document.getElementById("drawBtn");
const card = document.getElementById("card");
const shuffleSound = document.getElementById("shuffleSound");
const resultSound = document.getElementById("resultSound");

const wrapper = document.getElementById("countdownWrapper");
const number = document.getElementById("countNumber");
const ring = document.getElementById("progressRing");

const radius = 80;
const circumference = 2 * Math.PI * radius;

ring.style.strokeDasharray = circumference;

function getRandom() {
  return gojyuon[Math.floor(Math.random() * gojyuon.length)];
}

function startCountdown() {
  let count = 5;
  wrapper.style.display = "block";

  function tick() {
    number.textContent = count;

    ring.style.transition = "none";
    ring.style.strokeDashoffset = circumference;

    setTimeout(() => {
      ring.style.transition = "stroke-dashoffset 1s linear";
      ring.style.strokeDashoffset = 0;
    }, 50);

    if (count === 0) {
      wrapper.style.display = "none";
      return;
    }

    count--;
    setTimeout(tick, 1000);
  }

  tick();
}

btn.addEventListener("click", async () => {

  btn.disabled = true;
  card.classList.remove("flip");

  shuffleSound.loop = true;
  shuffleSound.currentTime = 0;
  shuffleSound.play().catch(()=>{});

  setTimeout(() => {

    shuffleSound.pause();
    shuffleSound.currentTime = 0;

    result.textContent = getRandom();
    card.classList.add("flip");

    resultSound.play().catch(()=>{});

    setTimeout(startCountdown, 1000);

    btn.disabled = false;

  }, 5000);

  function shuffleLoop() {
    if (!btn.disabled) return;
    result.textContent = getRandom();
    setTimeout(shuffleLoop, 200);
  }

  shuffleLoop();
});
</script>

</body>
</html>


